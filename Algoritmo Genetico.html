<html>
<head>
    <title> Algoritmo Genetico </title>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta content="">
    <style>
        canvas{
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
        textarea {
            resize: none;
            width: 100% !important;
        }
    </style>
    <!-- chartjs !-->


</head>

<body>
<script src="Utils.js"></script>
<script src="Chart.bundle.js"></script>
<script  src="algoritmoGenetico.js" type="text/javascript"></script>

<div style="width:80%;">
    <canvas id="canvas"></canvas>
</div>
<br>
<br>

<button id="prevGen" style="margin-bottom: 50px; background-color: crimson; color: whitesmoke; border: none;

    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-weight: bolder;
    border-radius: 10pt;
    font-size: 16px;">Prev Gen</button>

<button id="nextGen" style="margin-bottom: 50px; background-color: #4bc0c0; color: whitesmoke; border: none;

    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-weight: bolder;
    border-radius: 10pt;
    font-size: 16px;">Next Gen</button><br/>
  <div style="width:80%;">
        <canvas id="canvas2"></canvas>
        </div>
<hr/>
<br/><br/>
Open Data (Json):
<textarea id="jsonData" style="width: 90vw;height: 90vh;"></textarea>
<script>

    var MONTHS = [];
    var chrtIndex = 0;
    for(var z = 0; z<16;z++){
       var a = -4 +(z*0.2);
       var b = fobjetivo(a);
       b = Math.round(b * 100) / 100;
        MONTHS.push(""+ b);
    }
    var config = {
        type: 'line',
        data: {
            labels: MONTHS,
            datasets: [{
                label: "Individuos Gen "+ chrtIndex,
                backgroundColor: "rgba(75, 192, 192,0.5)"   ,
                borderColor: window.chartColors.green,
                data: GenerationRecord[chrtIndex].data.resume,
                fill: true
            }]
        },
        options: {
            responsive: true,
            title:{
                display:true,
                text:'Generaciones Algoritmo Genetico'
            },
            tooltips: {
                mode: 'index',
                intersect: false,
            },
            hover: {
                mode: 'nearest',
                intersect: true
            },
            scales: {
                xAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Fitness'
                    }
                }],
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Individuos'
                    }
                }]
            }
        }
    };
////////////////////////////////////////////////////////
var resXaxis = ["-4.0","-3.8","-3.6","-3.4","-3.2",
                "-3.0","-2.8","-2.6","-2.4","-2.2",
                "-2.0","-1.8","-1.6","-1.4","-1.2","-1.0"];

plotData = [];

for(var z = 0; z<16;z++){
   var a = -4 +(z*0.2);
   var b = fobjetivo(a);
   b = Math.round(b * 100) / 100;
    plotData.push(""+ b);
}

var config2 = {
    type: 'line',
    data: {
        labels: resXaxis,
        datasets: [{
            label: "Generacion "+ chrtIndex,
            backgroundColor: "rgba(75, 192, 192,0.5)"   ,
            borderColor: window.chartColors.green,
            data: plotData ,
            fill: false
        }]
    },
    options: {
        responsive: true,
        title:{
            display:false,
            text:''
        },
        tooltips: {
            mode: 'index',
            intersect: true,
        },
        hover: {
            mode: 'nearest',
            intersect: true
        },
        scales: {
            xAxes: [{
                display: true,
                scaleLabel: {
                    display: true,
                    labelString: 'x'
                }
            }],
            yAxes: [{
                display: true,
                scaleLabel: {
                    display: true,
                    labelString: 'y'
                }
            }]
        }
    }
};

///////////////////////////////////////////////////////
    window.onload = function() {
        var ctx = document.getElementById("canvas").getContext("2d");
        window.myLine = new Chart(ctx, config);

        var ctx2 = document.getElementById("canvas").getContext("2d");
        window.myLine2 = new Chart(ctx2, config2);
    };

    document.getElementById('nextGen').addEventListener('click', function() {
        if(chrtIndex <50){
            chrtIndex++;

            var newColor = window.chartColors.green
            var newDataset = datasets = {
                label: "Generacion "+chrtIndex,
                backgroundColor: "rgba(75, 192, 192,0.5)"    ,
                borderColor: window.chartColors.green,
                data: GenerationRecord[chrtIndex].data.resume,
                fill: true
            };

            config.data.datasets = [];
            config.data.datasets.push(newDataset);
            window.myLine.update();
        }
    });
    document.getElementById('prevGen').addEventListener('click', function() {
        if(chrtIndex > 0){
            chrtIndex--;

            var newColor = window.chartColors.green
            var newDataset = datasets = {
                label: "Individuos Gen "+ chrtIndex,
                backgroundColor: "rgba(75, 192, 192,0.5)"    ,
                borderColor: window.chartColors.green,
                data: GenerationRecord[chrtIndex].data.resume,
                fill: true
            };

            config.data.datasets = [];
            config.data.datasets.push(newDataset);
            window.myLine.update();
        }
    });


    document.getElementById('jsonData').textContent = JSON.stringify(GenerationRecord);

</script>

</body>



</html>
